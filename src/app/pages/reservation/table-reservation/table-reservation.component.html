<div
  tuiGroup
  class="tui-form__row tui-space_bottom-5"
  [adaptive]="true"
  [collapsed]="true">
  <tui-combo-box
    *tuiLet="stations$ | async as stations"
    class="b-form tui-form__row"
    [stringify]="stationsStringify"
    [(ngModel)]="station"
    (ngModelChange)="selectStation($event)">
    Поиск станции
    <input tuiTextfield placeholder="Поиск по названию" />
    <tui-data-list-wrapper
      *tuiDataList
      [itemContent]="stationsStringify | tuiStringifyContent"
      [items]="
        stations | tuiFilterByInputWith : stationsStringify
      "></tui-data-list-wrapper>
  </tui-combo-box>
  <tui-input-date [ngModel]="day$ | async" (ngModelChange)="day$.next($event)">
    Choose a date
  </tui-input-date>
</div>

<tui-loader [overlay]="true" [showLoader]="!!(loading$ | async)">
  <div
    *ngIf="data$ | async as data"
    class="table tui-space_bottom-5 tui-space_top-5">
    <div class="tui-row tui-space_bottom-5 tui-space_top-5">
      <div class="tui-col_md-1">
        <button
          *ngIf="index > 0"
          tuiIconButton
          type="button"
          size="s"
          appearance="secondary"
          icon="tuiIconArrowLeft"
          (click)="pageDown()"
          class="tui-space_right-3 tui-space_bottom-3"></button>
      </div>
      <div class="tui-col_md-10 tui-row">
        <div
          class="tui-col_md-3 header-post"
          *ngFor="let post of data.slice(index, index + 4); let i = index">
          ПОСТ {{ post[0].post.name }}
        </div>
      </div>
      <div class="tui-col_md-1">
        <button
          *ngIf="index + 4 < data.length"
          tuiIconButton
          type="button"
          size="s"
          appearance="secondary"
          icon="tuiIconArrowRight"
          (click)="pageUp()"
          class="tui-space_right-3 tui-space_bottom-3"></button>
      </div>
    </div>

    <div class="tui-row">
      <div class="time_column tui-col_md-1">
        <div *ngFor="let time of times" class="time">
          {{ time }}
        </div>
      </div>

      <div class="tui-col_md-10 tui-row table-res">
        <div
          class="column tui-col_md-3"
          *ngFor="let post of data.slice(index, index + 4)">
          <tui-island
            *ngFor="let order of post"
            [style.top.px]="(order.time - startWorkStation) * 50"
            [style.height.px]="order.duration * 50 - 30"
            class="order"
            (click)="openEditOrder(order)">
            <p class="tui-island__category">
              {{ order.startWork | time }} - {{ order.endWork | time }}
            </p>
            <p *ngIf="order.duration > 1" class="tui-island__category">
              Клиент: {{ order.client.name }}
            </p>
          </tui-island>
        </div>
      </div>

      <div class="time_column tui-col_md-1">
        <div *ngFor="let time of times" class="time">
          {{ time }}
        </div>
      </div>
    </div>
  </div>
</tui-loader>
