<div
  tuiGroup
  class="tui-form__row tui-space_bottom-5"
  [adaptive]="true"
  [collapsed]="true">
  <tui-select
    *tuiLet="stations$ | async as stations"
    class="b-form"
    [tuiTextfieldLabelOutside]="true"
    [valueContent]="stations ? stringify(stations) : loading"
    (ngModelChange)="selectStation($event)"
    [(ngModel)]="stationId">
    Станция
    <ng-template tuiDataList>
      <tui-data-list *ngIf="stations; else loading">
        <button *ngFor="let station of stations" tuiOption [value]="station.id">
          {{ station.name }}
        </button>
      </tui-data-list>
    </ng-template>
    <ng-template #loading>
      <tui-loader class="tui-space_vertical-3 loader"></tui-loader>
    </ng-template>
  </tui-select>
  <tui-input-date [ngModel]="day$ | async" (ngModelChange)="day$.next($event)">
    Choose a date
  </tui-input-date>
</div>

<tui-loader [overlay]="true" [showLoader]="!!(loading$ | async)">
  <div
    *ngIf="data$ | async as data"
    class="table tui-space_bottom-5 tui-space_top-5">
    <div class="tui-row tui-space_bottom-5 tui-space_top-5">
      <div class="tui-col_md-1">
        <button
          *ngIf="index > 0"
          tuiIconButton
          type="button"
          size="s"
          appearance="secondary"
          icon="tuiIconArrowLeft"
          (click)="pageDown()"
          class="tui-space_right-3 tui-space_bottom-3"></button>
      </div>
      <div class="tui-col_md-10 tui-row">
        <div
          class="tui-col_md-3 header-post"
          *ngFor="let post of data.slice(index, index + 4); let i = index">
          ПОСТ {{ post[0].post.name }}
        </div>
      </div>
      <div class="tui-col_md-1">
        <button
          *ngIf="index + 4 < data.length"
          tuiIconButton
          type="button"
          size="s"
          appearance="secondary"
          icon="tuiIconArrowRight"
          (click)="pageUp()"
          class="tui-space_right-3 tui-space_bottom-3"></button>
      </div>
    </div>

    <div class="tui-row">
      <div class="time_column tui-col_md-1">
        <div *ngFor="let time of times" class="time">
          {{ time }}
        </div>
      </div>

      <div class="tui-col_md-10 tui-row table-res">
        <div
          class="column tui-col_md-3"
          *ngFor="let post of data.slice(index, index + 4)">
          <tui-island
            *ngFor="let res of post"
            [style.top.px]="res.time * 50"
            [style.height.px]="res.duration * 50 - 30"
            class="order"
            (click)="clickOrder()">
            <p class="tui-island__category">10:00 - 13:00</p>
            <p *ngIf="res.duration > 1" class="tui-island__category">
              Автомойка стандарт (100 руб.)
            </p>
            <p *ngIf="res.duration > 2" class="tui-island__category">
              Алексей В.В.
            </p>
          </tui-island>
        </div>
      </div>

      <div class="time_column tui-col_md-1">
        <div *ngFor="let time of times" class="time">
          {{ time }}
        </div>
      </div>
    </div>
  </div>
</tui-loader>
